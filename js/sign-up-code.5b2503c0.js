(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["sign-up-code"],{"2d96":function(t,e,a){},3611:function(t,e,a){"use strict";var r=a("670c"),o=a.n(r);o.a},"670c":function(t,e,a){},c741:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-container",[a("v-slide-x-transition",{attrs:{name:"list",group:"","leave-absolute":"","hide-on-leave":"",tag:"v-row"}},[t._l(t.myCodes,(function(e){return a("v-col",{key:e.code,attrs:{cols:"12",sm:"6",md:"4",lg:"3",xl:"2"}},[a("sign-up-code-display",t._b({attrs:{id:e.code},on:{revoke:function(a){return t.revoke(e)},share:function(a){return t.share(e)},"need-refresh":function(a){return t.refresh(e)},"need-refresh-to":function(a){return t.refreshTo(e)},"check-to-user":function(a){return t.checkToUser(e)}}},"sign-up-code-display",e,!1))],1)})),t.addable?a("v-col",{key:"fab-placeholder",attrs:{cols:"2"}},[a("div",{staticClass:"fab-placeholder"})]):t._e()],2),a("v-dialog",{attrs:{"max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{fixed:"",dark:"",fab:"",bottom:"",right:"",color:"pink",loading:"loading"===t.addable||t.dialog,disabled:"disabled"===t.addable||t.dialog}},r),[a("v-icon",[t._v("mdi-plus")])],1)]}}]),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title"),a("v-card-text",[t._v(t._s(t.$t("signUpCodeAction.confirm.generate")))]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v(t._s(t.$t("cancel")))]),a("v-spacer"),a("v-btn",{attrs:{color:"primary",dark:"",text:""},on:{click:t.add}},[t._v(" "+t._s(t.$t("confirm"))+" ")])],1)],1)],1)],1)},o=[],n=(a("26d3"),a("0b38")),s=a("9869"),i=a("0613"),c=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-card",[a("v-card-title",{staticClass:"headline"},[a("router-link",{staticClass:"code-link",attrs:{to:"#"+t.code,"active-class":"accent--text"}},[t._v("#")]),t._v(" "+t._s(t.code)+" ")],1),a("v-card-subtitle",[t._v(t._s(t.$t("signUpCodeStatus."+t.status,{name:t.toUserName})))]),a("v-card-actions",[t.unused?[a("v-btn",{attrs:{color:"info"},on:{click:function(e){return t.$emit("share")}}},[t._v(" "+t._s(t.$t("share"))+" "),a("v-icon",{attrs:{right:""}},[t._v("mdi-share")])],1),a("v-spacer"),a("v-dialog",{attrs:{"max-width":"400"},scopedSlots:t._u([{key:"activator",fn:function(e){var r=e.on;return[a("v-btn",t._g({attrs:{text:"",color:"error"}},r),[t._v(t._s(t.$t("revoke")))])]}}],null,!1,1950506729),model:{value:t.dialog,callback:function(e){t.dialog=e},expression:"dialog"}},[a("v-card",[a("v-card-title"),a("v-card-text",[t._v(t._s(t.$t("signUpCodeAction.confirm.revoke",{code:t.code})))]),a("v-divider"),a("v-card-actions",[a("v-btn",{attrs:{text:""},on:{click:function(e){t.dialog=!1}}},[t._v(t._s(t.$t("cancel")))]),a("v-spacer"),a("v-btn",{attrs:{color:"error",text:""},on:{click:function(e){return t.$emit("revoke")}}},[t._v(" "+t._s(t.$t("confirm"))+" ")])],1)],1)],1)]:[a("v-spacer"),a("v-btn",{attrs:{text:"",color:"info"},on:{click:function(e){return t.$emit("check-to-user")}}},[t._v(" "+t._s(t.$t("checkThisUser"))+" "),a("v-icon",{attrs:{right:""}},[t._v("mdi-arrow-right")])],1)]],2)],1)},d=[],l={props:{from:String,code:String,to:[Boolean,String],toUserInfo:Object},data(){return{dialog:!1}},created(){!0===this.to&&this.$emit("need-refresh"),"string"!==typeof this.to||this.toUserInfo||this.$emit("need-refresh-to")},computed:{unused(){return!1===this.to},status(){return"string"===typeof this.to?"used":this.to?"using":"unused"},toUserName(){var t;return null===(t=this.toUserInfo)||void 0===t?void 0:t.name}}},u=l,v=(a("d178"),a("2be6")),f=a("16aa"),h=a.n(f),g=a("7265"),p=a("8467"),b=a("05d9"),m=a("3ee1"),_=a("29d0"),k=a("213b"),y=a("7b27"),C=Object(v["a"])(u,c,d,!1,null,"56ce24a9",null),$=C.exports;h()(C,{VBtn:g["a"],VCard:p["a"],VCardActions:b["a"],VCardSubtitle:b["b"],VCardText:b["c"],VCardTitle:b["d"],VDialog:m["a"],VDivider:_["a"],VIcon:k["a"],VSpacer:y["a"]});var U=s["a"].extend({components:{SignUpCodeDisplay:$},data(){return{SignUpCodeDisplay:$,addable:!0,dialog:!1}},methods:{async revoke(t){try{const e=t.code;await i["default"].dispatch.signUpCode.revoke(e),this.$alertSuccess(this.$t("signUpCodeAction.revoke.success",{code:e}))}catch(e){this.$alertError(e)}},share(t){this.$alertWarning("code share not implemented: "+t.code)},async refresh(t){await i["default"].dispatch.signUpCode.get(t.code)},async refreshTo(t){"string"===typeof t.to&&await i["default"].dispatch.user.queryUserInfo(t.to)},checkToUser(t){"string"===typeof t.to&&this.$router.push("user/"+t.to)},async add(){try{this.addable="loading",await i["default"].dispatch.signUpCode.generate()}finally{this.addable=!0,this.dialog=!1}}},computed:{myCodes(){const t=i["default"].getters.signUpCode.myCodes||[];return t.map(t=>{const e="string"===typeof t.to?i["default"].getters.user.getUserInfo(t.to):null;return Object(n["a"])(Object(n["a"])({},t),{},{toUserInfo:e})})}},async created(){try{await i["default"].dispatch.signUpCode.queryMyCodes()}catch(t){this.$alertError(t)}}}),V=U,x=(a("3611"),a("8a29")),w=a("39d5"),S=a("91a2"),T=Object(v["a"])(V,r,o,!1,null,"45e35a4c",null);e["default"]=T.exports;h()(T,{VBtn:g["a"],VCard:p["a"],VCardActions:b["a"],VCardText:b["c"],VCardTitle:b["d"],VCol:x["a"],VContainer:w["a"],VDialog:m["a"],VDivider:_["a"],VIcon:k["a"],VSlideXTransition:S["c"],VSpacer:y["a"]})},d178:function(t,e,a){"use strict";var r=a("2d96"),o=a.n(r);o.a}}]);